<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <title>DataTable Export with Entries & Add</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.bootstrap5.min.css" />

    <style>
      body { background: #f9fafb; }
      .card { border-radius: 0.75rem; box-shadow: 0 2px 6px rgba(0, 0, 0, .05); }
    </style>
  </head>

  <body>
    <div class="container py-4">
      <div class="card p-3">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5 class="fw-semibold">DataTable with Export, Add & Entries</h5>
          <div class="d-flex gap-2">
            <!-- Add Data Button -->
            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addDataModal">
              <i class="bi bi-plus-circle"></i> Add Data
            </button>

            <!-- Export Dropdown -->
            <div class="dropdown">
              <button class="btn btn-light border dropdown-toggle" type="button" id="exportMenuButton"
                data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-box-arrow-up"></i> Export
              </button>
              <ul class="dropdown-menu" aria-labelledby="exportMenuButton">
                <li><a class="dropdown-item" href="#" id="export-excel">Excel</a></li>
                <li><a class="dropdown-item" href="#" id="export-csv">CSV</a></li>
                <li><a class="dropdown-item" href="#" id="export-pdf">PDF</a></li>
                <li><a class="dropdown-item" href="#" id="export-print">Print</a></li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Custom Controls -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div>
            Show
            <select id="entries-select" class="form-select d-inline-block w-auto">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
            entries
          </div>
          <div>
            <label class="me-2">Search:</label>
            <input type="text" id="table-search" class="form-control d-inline-block w-auto">
          </div>
        </div>

        <!-- DataTable -->
        <div class="card-datatable text-nowrap">
          <table id="example" class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Date</th>
                <th>Salary</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>John Doe</td>
                <td>john@example.com</td>
                <td>01/01/2020</td>
                <td>$12000</td>
                <td><span class="badge bg-success">Active</span></td>
                <td>
                  <button class="btn btn-sm btn-primary"><i class="bi bi-pencil"></i></button>
                  <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Add Data Modal -->
    <div class="modal fade" id="addDataModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Add New Entry</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="addDataForm">
              <div class="mb-3">
                <label class="form-label">Name</label>
                <input type="text" id="name" class="form-control" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" id="email" class="form-control" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Date</label>
                <input type="date" id="date" class="form-control" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Salary</label>
                <input type="number" id="salary" class="form-control" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Status</label>
                <select id="status" class="form-select">
                  <option value="Active" selected>Active</option>
                  <option value="Inactive">Inactive</option>
                  <option value="Suspended">Suspended</option>
                </select>
              </div>
              <button type="submit" class="btn btn-success w-100">Add</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.bootstrap5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"></script>

    <script>
      $(document).ready(function () {
        // Initialize DataTable
        let table = $('#example').DataTable({
          responsive: true,
          dom: 't<"d-flex justify-content-between align-items-center mt-3"ip>',
          pageLength: 10,
          buttons: [
            { extend: 'excel', className: 'd-none', title: 'Data Export' },
            { extend: 'csv', className: 'd-none', title: 'Data Export' },
            { extend: 'pdf', className: 'd-none', title: 'Data Export' },
            { extend: 'print', className: 'd-none', title: 'Data Export' }
          ]
        });

        // Export triggers
        $('#export-excel').on('click', () => table.button('.buttons-excel').trigger());
        $('#export-csv').on('click', () => table.button('.buttons-csv').trigger());
        $('#export-pdf').on('click', () => table.button('.buttons-pdf').trigger());
        $('#export-print').on('click', () => table.button('.buttons-print').trigger());

        // Search box
        $('#table-search').on('keyup', function () {
          table.search(this.value).draw();
        });

        // Show entries dropdown
        $('#entries-select').on('change', function () {
          table.page.len($(this).val()).draw();
        });

        // Add Data form submit
        $('#addDataForm').on('submit', function (e) {
          e.preventDefault();

          let name = $('#name').val();
          let email = $('#email').val();
          let date = $('#date').val();
          let salary = '$' + $('#salary').val();
          let status = $('#status').val();

          let statusBadge = `<span class="badge bg-${
            status === 'Active' ? 'success' : status === 'Inactive' ? 'danger' : 'info'
          }">${status}</span>`;

          table.row.add([
            name,
            email,
            date,
            salary,
            statusBadge,
            `<button class="btn btn-sm btn-primary"><i class="bi bi-pencil"></i></button>
             <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>`
          ]).draw();

          $('#addDataModal').modal('hide');
          $('#addDataForm')[0].reset();
        });
      });
    </script>
  </body>
</html>
